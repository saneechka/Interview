### Задача на слияние каналов

В этой задаче требуется написать функцию, которая объединяет несколько входных каналов в один выходной канал. 

```go
const N = 5

func main() {
	in := make([]chan int, 0)
	for i := 0; i < N; i++ {
		in = append(in, make(chan int))
	}

	wg := sync.WaitGroup{}

	wg.Add(1)
	go func() {
		cc := make([]<-chan int, 0)
		for _, c := range in {
			cc = append(cc, c)
		}
		for v := range merge(cc...) {
			fmt.Println(v)
		}
		wg.Done()
	}()

	wg.Add(1)
	go func() {
		for i := 0; i < 20; i++ {
			in[i%N] <- i
		}
		for _, c := range in {
			close(c)
		}
		wg.Done()
	}()

	wg.Wait()
}

func merge(in ...<-chan int) <-chan int {
	// Let's do a better solution
	return nil
}
```

### Что происходит в функции main?

Мы создаем несколько каналов, отправляем в них данные и затем объединяем их в один канал, из которого читаем и выводим данные.

1. **Создание каналов**: Мы создаем `N` каналов и добавляем их в срез `in`.

2. **Горутина для слияния**: В первой горутине мы создаем срез `cc` из каналов и передаем его в функцию `merge`, которая объединяет все каналы в один. Результат выводится в консоль.

3. **Горутина для отправки данных**: Во второй горутине мы отправляем числа от 0 до 19 в каналы, распределяя их по модулю `N`. После этого все каналы закрываются.

4. **Функция `merge`**: Эта функция принимает произвольное количество каналов, запускает горутину для каждого из них, которая читает данные и отправляет их в общий выходной канал `out`. После завершения всех горутин `out` закрывается.

### Решение

```go
func merge(in ...<-chan int) <-chan int {
	out := make(chan int)
	wg := &sync.WaitGroup{}
	for _, val := range in {
		wg.Add(1)
		go func(ch <-chan int) {
			defer wg.Done()
			for value := range ch {
				out <- value
			}
		}(val)
	}

	go func() {
		wg.Wait()
		close(out)
	}()
	return out
}
```

Функция `merge` принимает несколько каналов `in` и объединяет их в один выходной канал `out`.

1. **Создание выходного канала**:
   Создается канал `out`, в который будут отправляться данные из всех входных каналов.

2. **Создание группы ожидания**:
   `sync.WaitGroup` используется для ожидания завершения всех горутин, которые читают из входных каналов.

3. **Запуск горутин для каждого канала**:
   - Для каждого канала `val` из `in`, функция добавляет единицу в группу ожидания с `wg.Add(1)`.
   - Запускается горутина, которая:
     - Считывает данные из канала `ch`.
     - Отправляет каждое считанное значение в канал `out`.
     - После завершения чтения из канала, вызывает `defer wg.Done()` для уменьшения счетчика группы ожидания.

4. **Закрытие выходного канала**:
   - Запускается дополнительная горутина, которая ждет завершения всех горутин (с помощью `wg.Wait()`).
   - После завершения всех горутин, `out` закрывается. Это сигнализирует о том, что больше данных не будет отправлено в канал, и позволяет потребителю завершить чтение корректно.

5. **Возврат выходного канала**:
   - Возвращает канал `out`, который теперь объединяет данные из всех входных каналов.
